import{c as z,r as s,j as a,b as de,e as X,n as Y,U as Ee}from"./index-Cia9Rl0f.js";import{C as te,a as re,b as ne,d as oe,c as se}from"./card-DzT8DSFs.js";import{u as Ae,L as Te,I as ae,a as le}from"./use-toast-BsMD8iB8.js";/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=z("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=z("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=z("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function ie(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ue(...e){return t=>{let r=!1;const o=e.map(n=>{const l=ie(n,t);return!r&&typeof l=="function"&&(r=!0),l});if(r)return()=>{for(let n=0;n<o.length;n++){const l=o[n];typeof l=="function"?l():ie(e[n],null)}}}}function M(...e){return s.useCallback(ue(...e),e)}function Oe(e){const t=ze(e),r=s.forwardRef((o,n)=>{const{children:l,...c}=o,i=s.Children.toArray(l),d=i.find(Fe);if(d){const f=d.props.children,h=i.map(p=>p===d?s.Children.count(f)>1?s.Children.only(null):s.isValidElement(f)?f.props.children:null:p);return a.jsx(t,{...c,ref:n,children:s.isValidElement(f)?s.cloneElement(f,void 0,h):null})}return a.jsx(t,{...c,ref:n,children:l})});return r.displayName=`${e}.Slot`,r}function ze(e){const t=s.forwardRef((r,o)=>{const{children:n,...l}=r;if(s.isValidElement(n)){const c=He(n),i=Ue(l,n.props);return n.type!==s.Fragment&&(i.ref=o?ue(o,c):c),s.cloneElement(n,i)}return s.Children.count(n)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var We=Symbol("radix.slottable");function Fe(e){return s.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===We}function Ue(e,t){const r={...t};for(const o in t){const n=e[o],l=t[o];/^on[A-Z]/.test(o)?n&&l?r[o]=(...i)=>{const d=l(...i);return n(...i),d}:n&&(r[o]=n):o==="style"?r[o]={...n,...l}:o==="className"&&(r[o]=[n,l].filter(Boolean).join(" "))}return{...e,...r}}function He(e){var o,n;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Ve=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],F=Ve.reduce((e,t)=>{const r=Oe(`Primitive.${t}`),o=s.forwardRef((n,l)=>{const{asChild:c,...i}=n,d=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...i,ref:l})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),J=globalThis!=null&&globalThis.document?s.useLayoutEffect:()=>{};function $e(e,t){return s.useReducer((r,o)=>t[r][o]??r,e)}var U=e=>{const{present:t,children:r}=e,o=Be(t),n=typeof r=="function"?r({present:o.isPresent}):s.Children.only(r),l=M(o.ref,qe(n));return typeof r=="function"||o.isPresent?s.cloneElement(n,{ref:l}):null};U.displayName="Presence";function Be(e){const[t,r]=s.useState(),o=s.useRef(null),n=s.useRef(e),l=s.useRef("none"),c=e?"mounted":"unmounted",[i,d]=$e(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const f=H(o.current);l.current=i==="mounted"?f:"none"},[i]),J(()=>{const f=o.current,h=n.current;if(h!==e){const m=l.current,b=H(f);e?d("MOUNT"):b==="none"||(f==null?void 0:f.display)==="none"?d("UNMOUNT"):d(h&&m!==b?"ANIMATION_OUT":"UNMOUNT"),n.current=e}},[e,d]),J(()=>{if(t){let f;const h=t.ownerDocument.defaultView??window,p=b=>{const j=H(o.current).includes(CSS.escape(b.animationName));if(b.target===t&&j&&(d("ANIMATION_END"),!n.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",f=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},m=b=>{b.target===t&&(l.current=H(o.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{h.clearTimeout(f),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:s.useCallback(f=>{o.current=f?getComputedStyle(f):null,r(f)},[])}}function H(e){return(e==null?void 0:e.animationName)||"none"}function qe(e){var o,n;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Xe(e,t=[]){let r=[];function o(l,c){const i=s.createContext(c),d=r.length;r=[...r,c];const f=p=>{var C;const{scope:m,children:b,...S}=p,j=((C=m==null?void 0:m[e])==null?void 0:C[d])||i,g=s.useMemo(()=>S,Object.values(S));return a.jsx(j.Provider,{value:g,children:b})};f.displayName=l+"Provider";function h(p,m){var j;const b=((j=m==null?void 0:m[e])==null?void 0:j[d])||i,S=s.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${p}\` must be used within \`${l}\``)}return[f,h]}const n=()=>{const l=r.map(c=>s.createContext(c));return function(i){const d=(i==null?void 0:i[e])||l;return s.useMemo(()=>({[`__scope${e}`]:{...i,[e]:d}}),[i,d])}};return n.scopeName=e,[o,Ye(n,...t)]}function Ye(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const o=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(l){const c=o.reduce((i,{useScope:d,scopeName:f})=>{const p=d(l)[`__scope${f}`];return{...i,...p}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}function L(e){const t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...r)=>{var o;return(o=t.current)==null?void 0:o.call(t,...r)},[])}var Je=s.createContext(void 0);function Ze(e){const t=s.useContext(Je);return e||t||"ltr"}function Ke(e,[t,r]){return Math.min(r,Math.max(t,e))}function D(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e==null||e(n),r===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function Ge(e,t){return s.useReducer((r,o)=>t[r][o]??r,e)}var Z="ScrollArea",[fe,wt]=Xe(Z),[Qe,T]=fe(Z),he=s.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:o="hover",dir:n,scrollHideDelay:l=600,...c}=e,[i,d]=s.useState(null),[f,h]=s.useState(null),[p,m]=s.useState(null),[b,S]=s.useState(null),[j,g]=s.useState(null),[C,w]=s.useState(0),[E,R]=s.useState(0),[A,I]=s.useState(!1),[y,N]=s.useState(!1),P=M(t,x=>d(x)),u=Ze(n);return a.jsx(Qe,{scope:r,type:o,dir:u,scrollHideDelay:l,scrollArea:i,viewport:f,onViewportChange:h,content:p,onContentChange:m,scrollbarX:b,onScrollbarXChange:S,scrollbarXEnabled:A,onScrollbarXEnabledChange:I,scrollbarY:j,onScrollbarYChange:g,scrollbarYEnabled:y,onScrollbarYEnabledChange:N,onCornerWidthChange:w,onCornerHeightChange:R,children:a.jsx(F.div,{dir:u,...c,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});he.displayName=Z;var me="ScrollAreaViewport",pe=s.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:o,nonce:n,...l}=e,c=T(me,r),i=s.useRef(null),d=M(t,i,c.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(F.div,{"data-radix-scroll-area-viewport":"",...l,ref:d,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...e.style},children:a.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});pe.displayName=me;var _="ScrollAreaScrollbar",K=s.forwardRef((e,t)=>{const{forceMount:r,...o}=e,n=T(_,e.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:c}=n,i=e.orientation==="horizontal";return s.useEffect(()=>(i?l(!0):c(!0),()=>{i?l(!1):c(!1)}),[i,l,c]),n.type==="hover"?a.jsx(et,{...o,ref:t,forceMount:r}):n.type==="scroll"?a.jsx(tt,{...o,ref:t,forceMount:r}):n.type==="auto"?a.jsx(be,{...o,ref:t,forceMount:r}):n.type==="always"?a.jsx(G,{...o,ref:t}):null});K.displayName=_;var et=s.forwardRef((e,t)=>{const{forceMount:r,...o}=e,n=T(_,e.__scopeScrollArea),[l,c]=s.useState(!1);return s.useEffect(()=>{const i=n.scrollArea;let d=0;if(i){const f=()=>{window.clearTimeout(d),c(!0)},h=()=>{d=window.setTimeout(()=>c(!1),n.scrollHideDelay)};return i.addEventListener("pointerenter",f),i.addEventListener("pointerleave",h),()=>{window.clearTimeout(d),i.removeEventListener("pointerenter",f),i.removeEventListener("pointerleave",h)}}},[n.scrollArea,n.scrollHideDelay]),a.jsx(U,{present:r||l,children:a.jsx(be,{"data-state":l?"visible":"hidden",...o,ref:t})})}),tt=s.forwardRef((e,t)=>{const{forceMount:r,...o}=e,n=T(_,e.__scopeScrollArea),l=e.orientation==="horizontal",c=q(()=>d("SCROLL_END"),100),[i,d]=Ge("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return s.useEffect(()=>{if(i==="idle"){const f=window.setTimeout(()=>d("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(f)}},[i,n.scrollHideDelay,d]),s.useEffect(()=>{const f=n.viewport,h=l?"scrollLeft":"scrollTop";if(f){let p=f[h];const m=()=>{const b=f[h];p!==b&&(d("SCROLL"),c()),p=b};return f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[n.viewport,l,d,c]),a.jsx(U,{present:r||i!=="hidden",children:a.jsx(G,{"data-state":i==="hidden"?"hidden":"visible",...o,ref:t,onPointerEnter:D(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:D(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),be=s.forwardRef((e,t)=>{const r=T(_,e.__scopeScrollArea),{forceMount:o,...n}=e,[l,c]=s.useState(!1),i=e.orientation==="horizontal",d=q(()=>{if(r.viewport){const f=r.viewport.offsetWidth<r.viewport.scrollWidth,h=r.viewport.offsetHeight<r.viewport.scrollHeight;c(i?f:h)}},10);return O(r.viewport,d),O(r.content,d),a.jsx(U,{present:o||l,children:a.jsx(G,{"data-state":l?"visible":"hidden",...n,ref:t})})}),G=s.forwardRef((e,t)=>{const{orientation:r="vertical",...o}=e,n=T(_,e.__scopeScrollArea),l=s.useRef(null),c=s.useRef(0),[i,d]=s.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=Se(i.viewport,i.content),h={...o,sizes:i,onSizesChange:d,hasThumb:f>0&&f<1,onThumbChange:m=>l.current=m,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:m=>c.current=m};function p(m,b){return lt(m,c.current,i,b)}return r==="horizontal"?a.jsx(rt,{...h,ref:t,onThumbPositionChange:()=>{if(n.viewport&&l.current){const m=n.viewport.scrollLeft,b=ce(m,i,n.dir);l.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:m=>{n.viewport&&(n.viewport.scrollLeft=m)},onDragScroll:m=>{n.viewport&&(n.viewport.scrollLeft=p(m,n.dir))}}):r==="vertical"?a.jsx(nt,{...h,ref:t,onThumbPositionChange:()=>{if(n.viewport&&l.current){const m=n.viewport.scrollTop,b=ce(m,i);l.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:m=>{n.viewport&&(n.viewport.scrollTop=m)},onDragScroll:m=>{n.viewport&&(n.viewport.scrollTop=p(m))}}):null}),rt=s.forwardRef((e,t)=>{const{sizes:r,onSizesChange:o,...n}=e,l=T(_,e.__scopeScrollArea),[c,i]=s.useState(),d=s.useRef(null),f=M(t,d,l.onScrollbarXChange);return s.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),a.jsx(we,{"data-orientation":"horizontal",...n,ref:f,sizes:r,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":B(r)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,p)=>{if(l.viewport){const m=l.viewport.scrollLeft+h.deltaX;e.onWheelScroll(m),Pe(m,p)&&h.preventDefault()}},onResize:()=>{d.current&&l.viewport&&c&&o({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:$(c.paddingLeft),paddingEnd:$(c.paddingRight)}})}})}),nt=s.forwardRef((e,t)=>{const{sizes:r,onSizesChange:o,...n}=e,l=T(_,e.__scopeScrollArea),[c,i]=s.useState(),d=s.useRef(null),f=M(t,d,l.onScrollbarYChange);return s.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),a.jsx(we,{"data-orientation":"vertical",...n,ref:f,sizes:r,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":B(r)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,p)=>{if(l.viewport){const m=l.viewport.scrollTop+h.deltaY;e.onWheelScroll(m),Pe(m,p)&&h.preventDefault()}},onResize:()=>{d.current&&l.viewport&&c&&o({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:$(c.paddingTop),paddingEnd:$(c.paddingBottom)}})}})}),[ot,ge]=fe(_),we=s.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:o,hasThumb:n,onThumbChange:l,onThumbPointerUp:c,onThumbPointerDown:i,onThumbPositionChange:d,onDragScroll:f,onWheelScroll:h,onResize:p,...m}=e,b=T(_,r),[S,j]=s.useState(null),g=M(t,P=>j(P)),C=s.useRef(null),w=s.useRef(""),E=b.viewport,R=o.content-o.viewport,A=L(h),I=L(d),y=q(p,10);function N(P){if(C.current){const u=P.clientX-C.current.left,x=P.clientY-C.current.top;f({x:u,y:x})}}return s.useEffect(()=>{const P=u=>{const x=u.target;(S==null?void 0:S.contains(x))&&A(u,R)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[E,S,R,A]),s.useEffect(I,[o,I]),O(S,y),O(b.content,y),a.jsx(ot,{scope:r,scrollbar:S,hasThumb:n,onThumbChange:L(l),onThumbPointerUp:L(c),onThumbPositionChange:I,onThumbPointerDown:L(i),children:a.jsx(F.div,{...m,ref:g,style:{position:"absolute",...m.style},onPointerDown:D(e.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),C.current=S.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),N(P))}),onPointerMove:D(e.onPointerMove,N),onPointerUp:D(e.onPointerUp,P=>{const u=P.target;u.hasPointerCapture(P.pointerId)&&u.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=w.current,b.viewport&&(b.viewport.style.scrollBehavior=""),C.current=null})})})}),V="ScrollAreaThumb",xe=s.forwardRef((e,t)=>{const{forceMount:r,...o}=e,n=ge(V,e.__scopeScrollArea);return a.jsx(U,{present:r||n.hasThumb,children:a.jsx(st,{ref:t,...o})})}),st=s.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:o,...n}=e,l=T(V,r),c=ge(V,r),{onThumbPositionChange:i}=c,d=M(t,p=>c.onThumbChange(p)),f=s.useRef(void 0),h=q(()=>{f.current&&(f.current(),f.current=void 0)},100);return s.useEffect(()=>{const p=l.viewport;if(p){const m=()=>{if(h(),!f.current){const b=it(p,i);f.current=b,i()}};return i(),p.addEventListener("scroll",m),()=>p.removeEventListener("scroll",m)}},[l.viewport,h,i]),a.jsx(F.div,{"data-state":c.hasThumb?"visible":"hidden",...n,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:D(e.onPointerDownCapture,p=>{const b=p.target.getBoundingClientRect(),S=p.clientX-b.left,j=p.clientY-b.top;c.onThumbPointerDown({x:S,y:j})}),onPointerUp:D(e.onPointerUp,c.onThumbPointerUp)})});xe.displayName=V;var Q="ScrollAreaCorner",ve=s.forwardRef((e,t)=>{const r=T(Q,e.__scopeScrollArea),o=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&o?a.jsx(at,{...e,ref:t}):null});ve.displayName=Q;var at=s.forwardRef((e,t)=>{const{__scopeScrollArea:r,...o}=e,n=T(Q,r),[l,c]=s.useState(0),[i,d]=s.useState(0),f=!!(l&&i);return O(n.scrollbarX,()=>{var p;const h=((p=n.scrollbarX)==null?void 0:p.offsetHeight)||0;n.onCornerHeightChange(h),d(h)}),O(n.scrollbarY,()=>{var p;const h=((p=n.scrollbarY)==null?void 0:p.offsetWidth)||0;n.onCornerWidthChange(h),c(h)}),f?a.jsx(F.div,{...o,ref:t,style:{width:l,height:i,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function $(e){return e?parseInt(e,10):0}function Se(e,t){const r=e/t;return isNaN(r)?0:r}function B(e){const t=Se(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=(e.scrollbar.size-r)*t;return Math.max(o,18)}function lt(e,t,r,o="ltr"){const n=B(r),l=n/2,c=t||l,i=n-c,d=r.scrollbar.paddingStart+c,f=r.scrollbar.size-r.scrollbar.paddingEnd-i,h=r.content-r.viewport,p=o==="ltr"?[0,h]:[h*-1,0];return ye([d,f],p)(e)}function ce(e,t,r="ltr"){const o=B(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=t.scrollbar.size-n,c=t.content-t.viewport,i=l-o,d=r==="ltr"?[0,c]:[c*-1,0],f=Ke(e,d);return ye([0,c],[0,i])(f)}function ye(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(r-e[0])}}function Pe(e,t){return e>0&&e<t}var it=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},o=0;return function n(){const l={left:e.scrollLeft,top:e.scrollTop},c=r.left!==l.left,i=r.top!==l.top;(c||i)&&t(),r=l,o=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(o)};function q(e,t){const r=L(e),o=s.useRef(0);return s.useEffect(()=>()=>window.clearTimeout(o.current),[]),s.useCallback(()=>{window.clearTimeout(o.current),o.current=window.setTimeout(r,t)},[r,t])}function O(e,t){const r=L(t);J(()=>{let o=0;if(e){const n=new ResizeObserver(()=>{cancelAnimationFrame(o),o=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(o),n.unobserve(e)}}},[e,r])}var Ce=he,ct=pe,dt=ve;const Ne=s.forwardRef(({className:e,children:t,...r},o)=>a.jsxs(Ce,{ref:o,className:de("relative overflow-hidden",e),...r,children:[a.jsx(ct,{className:"h-full w-full rounded-[inherit]",children:t}),a.jsx(Re,{}),a.jsx(dt,{})]}));Ne.displayName=Ce.displayName;const Re=s.forwardRef(({className:e,orientation:t="vertical",...r},o)=>a.jsx(K,{ref:o,orientation:t,className:de("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:a.jsx(xe,{className:"relative flex-1 rounded-full bg-border"})}));Re.displayName=K.displayName;const ut=()=>`chat_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,ft=e=>e.startsWith("image/")?Le:e.includes("pdf")||e.includes("document")||e.includes("text")?_e:Ie,ht=e=>{if(!e)return"";const t=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,r)*100)/100+" "+t[r]},mt=async e=>{try{const r=await(await fetch(e.url)).blob(),o=window.URL.createObjectURL(r),n=document.createElement("a");n.href=o,n.download=e.name,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(o),document.body.removeChild(n)}catch(t){console.error("Download failed:",t)}},xt=()=>{const{toast:e}=Ae(),[t,r]=s.useState(!1),[o,n]=s.useState(""),[l,c]=s.useState([]),[i,d]=s.useState(""),[f,h]=s.useState(!1),p=s.useRef(null),m=s.useRef(0),b=s.useRef(ut());s.useEffect(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},[l]);const S=g=>{g.preventDefault(),o==="password123"?(r(!0),c([{id:m.current++,text:"Hello! I'm your AI assistant. How can I help you today?",sender:"bot",timestamp:new Date}])):e({title:"Access Denied",description:"Incorrect password. Please try again.",variant:"destructive",duration:3e3}),n("")},j=async g=>{if(g.preventDefault(),!i.trim())return;const C={id:m.current++,text:i,sender:"user",timestamp:new Date};c(w=>[...w,C]),d(""),h(!0);try{const w="https://n8n.sunilkhatri.info/webhook/4a05c357-8d23-4869-90dd-6a7bea580582/chat",E={chatInput:i,session_id:b.current,sessionId:b.current,sessionID:b.current,memory_session_id:b.current,timestamp:new Date().toISOString(),source:"chatbot"},R=new URL(w);R.searchParams.append("session_id",b.current),R.searchParams.append("sessionId",b.current),console.log("Sending request to:",R.toString()),console.log("Request body:",E),console.log("Webhook URL from env:","https://n8n.sunilkhatri.info/webhook/4a05c357-8d23-4869-90dd-6a7bea580582/chat"),console.log("Fallback URL from env:","https://n8n.sunilkhatri.info/webhook/contact-details");const A=new AbortController,I=setTimeout(()=>A.abort(),5*60*1e3),y=await fetch(R.toString(),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Basic ${btoa("sunilkhatri:Utility@5432")}`,"X-Session-ID":b.current,"Session-ID":b.current},body:JSON.stringify(E),signal:A.signal});clearTimeout(I);let N="I'm sorry, I couldn't process your request at the moment.";if(console.log("Response status:",y.status),console.log("Response headers:",Object.fromEntries(y.headers.entries())),y.ok){console.log("Response is OK, status:",y.status);try{const u=await y.json();console.log("Full Response data:",JSON.stringify(u,null,2)),console.log("Response data type:",typeof u),console.log("Response data keys:",Object.keys(u||{}));let x=null;typeof u=="string"&&(x=u,console.log("Found direct string response:",x));const k=["output","response","message","text","result","answer","reply","content","data","body","value","chatResponse","aiResponse","assistant_response","bot_response","llm_response"];for(const v of k)if(u&&u[v]!==void 0&&u[v]!==null){x=u[v],console.log(`Found response in field '${v}':`,x);break}if(!x&&u&&typeof u=="object"&&(Array.isArray(u)&&u.length>0&&(x=u[0],console.log("Found response in array[0]:",x)),!x&&u.data&&typeof u.data=="object")){for(const v of k)if(u.data[v]!==void 0&&u.data[v]!==null){x=u.data[v],console.log(`Found response in nested data.${v}:`,x);break}}if(!x&&u&&typeof u=="object"){const v=Object.values(u).filter(ee=>typeof ee=="string"&&ee.trim().length>0);v.length>0&&(x=v[0],console.log("Found string value in object:",x))}N=x||N,console.log("Final extracted bot response:",N);let W=[];u.files&&Array.isArray(u.files)?W=u.files.map(v=>({name:v.name||v.filename||"download",url:v.url||v.download_url||v.link,type:v.type||v.mimetype||"application/octet-stream",size:v.size||v.filesize})):u.file?W=[{name:u.file.name||u.file.filename||"download",url:u.file.url||u.file.download_url||u.file.link,type:u.file.type||u.file.mimetype||"application/octet-stream",size:u.file.size||u.file.filesize}]:(u.download_url||u.file_url)&&(W=[{name:u.filename||"download",url:u.download_url||u.file_url,type:u.filetype||"application/octet-stream",size:u.filesize}]);const je={id:m.current++,text:N,sender:"bot",timestamp:new Date,files:W.length>0?W:void 0};c(v=>[...v,je]);return}catch(u){console.error("JSON parsing failed:",u),console.error("JSON error type:",typeof u),console.error("JSON error message:",u instanceof Error?u.message:String(u));try{const k=await y.clone().text();console.log("Raw response text after JSON parse failure:",k),console.log("Response text type:",typeof k),console.log("Response text length:",k.length),k&&k.trim().length>0?(N=k.trim(),console.log("Using raw text response as bot response:",N)):N="The server responded successfully but the response was empty. The n8n workflow completed but returned no data."}catch(x){console.error("Failed to get text from response:",x),N="The server responded successfully but the response format was unexpected. The n8n workflow may be working but returning data in an unexpected format."}}}else{let u="";try{const x=await y.json();u=x.message||x.error||""}catch{try{u=await y.text()}catch{u=y.statusText}}console.error("Webhook response error:",{status:y.status,statusText:y.statusText,url:w,errorDetails:u}),y.status===500?N="Sorry, there's a temporary issue with the AI service. The request was received but couldn't be processed. Please try again in a moment.":y.status===401||y.status===403?N="Authentication error. Please check the webhook credentials.":N=`Error: Unable to connect to the AI service (${y.status}). ${u||"Please try again later."}`}const P={id:m.current++,text:N,sender:"bot",timestamp:new Date};c(u=>[...u,P])}catch(w){console.error("Chat error:",w),console.error("Error type:",typeof w),console.error("Error name:",w instanceof Error?w.name:"Unknown"),console.error("Error message:",w instanceof Error?w.message:String(w)),console.error("Error stack:",w instanceof Error?w.stack:"No stack available");let E="Sorry, I'm having trouble connecting right now. Please check your internet connection and try again.",R="Connection Error",A="Failed to send message. Please check your connection.";w instanceof Error&&w.name==="AbortError"?(E="The request is taking longer than expected (over 5 minutes). The AI might still be processing your request. Please try again or check back later.",R="Request Timeout",A="The request timed out after 5 minutes. Please try again."):w instanceof TypeError?(E="There was an issue processing the response from the server. Please try again.",R="Response Processing Error",A="Failed to process server response. Please try again."):w instanceof Error&&(w.message.includes("Failed to fetch")?(E="Network connection failed. Please check your internet connection and try again.",R="Network Error",A="Unable to reach the server. Please check your connection."):w.message.includes("JSON")&&(E="The server response was not in the expected format. The n8n workflow may be working but returning invalid data.",R="Response Format Error",A="Server response format issue. Please check the n8n workflow output."));const I={id:m.current++,text:E,sender:"bot",timestamp:new Date};c(y=>[...y,I]),e({title:R,description:A,variant:"destructive",duration:5e3})}finally{h(!1)}};return t?a.jsxs("section",{className:"section-container animate-fade-in",children:[a.jsxs("div",{className:"page-header",children:[a.jsx("h2",{className:"page-header-title",children:"AI Assistant"}),a.jsx("p",{className:"page-header-description",children:"Chat with our AI assistant for any questions or support."})]}),a.jsxs(te,{className:"max-w-4xl mx-auto",children:[a.jsxs(re,{children:[a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(Y,{className:"h-5 w-5"}),"AI Chat Assistant"]}),a.jsx(oe,{children:"Ask me anything and I'll do my best to help!"})]}),a.jsx(se,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsx(Ne,{className:"h-96 w-full border rounded-md p-4",ref:p,children:a.jsxs("div",{className:"space-y-4",children:[l.map(g=>a.jsx("div",{className:`flex gap-3 ${g.sender==="user"?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`flex gap-2 max-w-[80%] ${g.sender==="user"?"flex-row-reverse":"flex-row"}`,children:[a.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${g.sender==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:g.sender==="user"?a.jsx(Ee,{className:"h-4 w-4"}):a.jsx(Y,{className:"h-4 w-4"})}),a.jsxs("div",{className:`rounded-lg px-3 py-2 ${g.sender==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[a.jsx("p",{className:"text-sm",children:g.text}),g.files&&g.files.length>0&&a.jsx("div",{className:"mt-2 space-y-2",children:g.files.map((C,w)=>{const E=ft(C.type);return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-background/20 rounded border",children:[a.jsx(E,{className:"h-4 w-4"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs font-medium truncate",children:C.name}),C.size&&a.jsx("p",{className:"text-xs opacity-70",children:ht(C.size)})]}),a.jsx(X,{size:"sm",variant:"ghost",onClick:()=>mt(C),className:"h-6 w-6 p-0 hover:bg-background/30",children:a.jsx(ke,{className:"h-3 w-3"})})]},w)})}),a.jsx("p",{className:"text-xs opacity-70 mt-1",children:g.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},g.id)),f&&a.jsx("div",{className:"flex gap-3 justify-start",children:a.jsxs("div",{className:"flex gap-2 max-w-[80%]",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-muted flex items-center justify-center",children:a.jsx(Y,{className:"h-4 w-4"})}),a.jsx("div",{className:"rounded-lg px-3 py-2 bg-muted",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(le,{className:"h-4 w-4 animate-spin"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm",children:"Thinking..."}),a.jsx("p",{className:"text-xs opacity-70",children:"This may take up to 5 minutes"})]})]})})]})})]})}),a.jsxs("form",{onSubmit:j,className:"flex gap-2",children:[a.jsx(ae,{placeholder:"Type your message...",value:i,onChange:g=>d(g.target.value),disabled:f,className:"flex-1"}),a.jsx(X,{type:"submit",disabled:f||!i.trim(),children:f?a.jsx(le,{className:"h-4 w-4 animate-spin"}):a.jsx(Me,{className:"h-4 w-4"})})]})]})})]})]}):a.jsxs("section",{className:"section-container animate-fade-in",children:[a.jsxs("div",{className:"page-header",children:[a.jsx("h2",{className:"page-header-title",children:"AI Assistant"}),a.jsx("p",{className:"page-header-description",children:"Please enter the password to access the AI assistant."})]}),a.jsx("div",{className:"flex justify-center",children:a.jsxs(te,{className:"w-full max-w-md",children:[a.jsxs(re,{className:"text-center",children:[a.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-muted",children:a.jsx(De,{className:"h-8 w-8 text-muted-foreground"})}),a.jsx(ne,{children:"Password Required"}),a.jsx(oe,{children:"Enter the password to access the chatbot"})]}),a.jsx(se,{children:a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"password",children:"Password"}),a.jsx(ae,{id:"password",type:"password",placeholder:"Enter password",value:o,onChange:g=>n(g.target.value),required:!0})]}),a.jsx(X,{type:"submit",className:"w-full",children:"Access Chatbot"})]})})]})})]})};export{xt as default};
