import{r as m,j as e,b as I,q as x,d,e as T}from"./index-CEkp7KTE.js";import{C as R,a as O,b as P,d as U,c as B}from"./card-D67GMDHG.js";import{u as D,L as v,I as $,a as F}from"./use-toast-Du_T-QP7.js";import{C as q}from"./circle-check-big-Z3e8dlnv.js";const C=m.forwardRef(({className:h,...u},g)=>e.jsx("textarea",{className:I("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",h),ref:g,...u}));C.displayName="Textarea";const H=()=>{const{toast:h}=D(),[u,g]=m.useState(""),[j,w]=m.useState(""),[b,N]=m.useState(""),[k,y]=m.useState(!1),[M,f]=m.useState(null),E=[{icon:x.phone,label:"Phone",value:d.personal.contact.phone,href:`tel:${d.personal.contact.phone}`},{icon:x.email,label:"Email",value:d.personal.contact.email,href:`mailto:${d.personal.contact.email}`},{icon:x.location,label:"Location",value:d.personal.contact.location},{icon:x.linkedin,label:"LinkedIn",value:"Connect with me",href:d.personal.social.linkedin}].filter(a=>a.value),L=async a=>{a.preventDefault(),y(!0),f(null);const p="https://n8n.sunilkhatri.info/webhook/contact-details";if(!u.trim()||!j.trim()||!b.trim()){h({title:"Validation Error",description:"Please fill in all fields before submitting.",variant:"destructive",duration:3e3}),y(!1);return}const n={name:u.trim(),email:j.trim(),message:b.trim(),timestamp:new Date().toISOString()};console.log("Sending contact form data:",n),console.log("Webhook URL:",p);try{const r="n8n-sunil-contact",l="n8n-sunil-contact";console.log("Attempting multiple authentication methods...");const A=new URLSearchParams({name:n.name,email:n.email,message:n.message,timestamp:n.timestamp}),S=`${p}?${A.toString()}`;let s=null,o="";try{console.log("Method 1: GET with Basic Auth");const t="Basic "+btoa(`${r}:${l}`);s=await fetch(S,{method:"GET",headers:{Accept:"application/json, text/plain, */*",Authorization:t}}),console.log("Method 1 Response status:",s.status),s.ok?console.log("Method 1 succeeded!"):o=`Method 1 failed: ${s.status} ${s.statusText}`}catch(t){o=`Method 1 error: ${t instanceof Error?t.message:"Unknown error"}`,console.log(o)}if(!s||!s.ok)try{console.log("Method 2: GET without authentication"),s=await fetch(S,{method:"GET",headers:{Accept:"application/json, text/plain, */*"}}),console.log("Method 2 Response status:",s.status),s.ok?console.log("Method 2 succeeded!"):o=`Method 2 failed: ${s.status} ${s.statusText}`}catch(t){o=`Method 2 error: ${t instanceof Error?t.message:"Unknown error"}`,console.log(o)}if(!s||!s.ok)try{console.log("Method 3: POST with JSON and Basic Auth");const t="Basic "+btoa(`${r}:${l}`);s=await fetch(p,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json, text/plain, */*",Authorization:t},body:JSON.stringify(n)}),console.log("Method 3 Response status:",s.status),s.ok?console.log("Method 3 succeeded!"):o=`Method 3 failed: ${s.status} ${s.statusText}`}catch(t){o=`Method 3 error: ${t instanceof Error?t.message:"Unknown error"}`,console.log(o)}if(!s)throw new Error(`All connection methods failed. Last error: ${o}`);const i=await s.text();console.log("Response text:",i);let c="";if(!s.ok){try{const t=JSON.parse(i);c=t.message||t.error||i}catch{c=`HTTP ${s.status}: ${s.statusText||i||"Network response was not ok"}`}throw new Error(c)}try{const t=JSON.parse(i);c=t.message||t.success||t.result||"Thanks for reaching out! I'll get back to you soon."}catch{c=i||"Thanks for reaching out! I'll get back to you soon."}f(c),g(""),w(""),N(""),h({title:"Message Sent Successfully!",description:"Your message has been delivered. I'll respond as soon as possible.",duration:5e3})}catch(r){console.error("Contact form submission error:",r),f(null);let l="Unknown error occurred";r instanceof TypeError&&r.message.includes("fetch")?l="Network error - please check your internet connection or try again later":r instanceof Error&&(l=r.message),h({title:"Failed to Send Message",description:`Error: ${l}. Please try again or contact me directly via email.`,variant:"destructive",duration:7e3})}finally{y(!1)}};return e.jsxs("section",{className:"section-container animate-fade-in",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h2",{className:"page-header-title",children:"Contact Me"}),e.jsx("p",{className:"page-header-description",children:"I'm available for freelance work, collaborations, or a friendly chat. Let's connect!"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[e.jsx("div",{className:"space-y-6",children:E.map((a,p)=>e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-muted p-3 rounded-lg",children:e.jsx(a.icon,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:a.label}),a.href?e.jsx("a",{href:a.href,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:a.value}):e.jsx("p",{className:"text-muted-foreground",children:a.value})]})]},p))}),e.jsxs(R,{children:[e.jsxs(O,{children:[e.jsx(P,{children:"Send a Message"}),e.jsx(U,{children:"I'll get back to you as soon as possible."})]}),e.jsx(B,{children:M?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-[280px] text-center p-4",children:[e.jsx(q,{className:"w-16 h-16 text-green-500 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Message Sent!"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:M}),e.jsx(T,{onClick:()=>f(null),children:"Send Another Message"})]}):e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"name",children:"Name"}),e.jsx($,{id:"name",placeholder:"Your Name",value:u,onChange:a=>g(a.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"email",children:"Email"}),e.jsx($,{id:"email",type:"email",placeholder:"your.email@example.com",value:j,onChange:a=>w(a.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"message",children:"Message"}),e.jsx(C,{id:"message",placeholder:"Your message...",rows:5,value:b,onChange:a=>N(a.target.value),required:!0})]}),e.jsx(T,{type:"submit",className:"w-full",disabled:k,children:k?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Message"})]})})]})]})]})};export{H as default};
