import{c as O,r as s,j as l,b as de,e as X,n as Y,U as Ae}from"./index-DfWGPMwp.js";import{C as te,a as re,b as ne,d as oe,c as se}from"./card-BVRaB0GZ.js";import{L as Ee,I as le}from"./label-u0yg0Ctp.js";import{u as Te,L as ae}from"./use-toast-CAL4TYOg.js";/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=O("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=O("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=O("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=O("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=O("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=O("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function ie(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ue(...e){return t=>{let r=!1;const o=e.map(n=>{const a=ie(n,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let n=0;n<o.length;n++){const a=o[n];typeof a=="function"?a():ie(e[n],null)}}}}function M(...e){return s.useCallback(ue(...e),e)}function Oe(e){const t=ze(e),r=s.forwardRef((o,n)=>{const{children:a,...c}=o,i=s.Children.toArray(a),d=i.find(Ue);if(d){const u=d.props.children,h=i.map(p=>p===d?s.Children.count(u)>1?s.Children.only(null):s.isValidElement(u)?u.props.children:null:p);return l.jsx(t,{...c,ref:n,children:s.isValidElement(u)?s.cloneElement(u,void 0,h):null})}return l.jsx(t,{...c,ref:n,children:a})});return r.displayName=`${e}.Slot`,r}function ze(e){const t=s.forwardRef((r,o)=>{const{children:n,...a}=r;if(s.isValidElement(n)){const c=He(n),i=Fe(a,n.props);return n.type!==s.Fragment&&(i.ref=o?ue(o,c):c),s.cloneElement(n,i)}return s.Children.count(n)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var We=Symbol("radix.slottable");function Ue(e){return s.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===We}function Fe(e,t){const r={...t};for(const o in t){const n=e[o],a=t[o];/^on[A-Z]/.test(o)?n&&a?r[o]=(...i)=>{const d=a(...i);return n(...i),d}:n&&(r[o]=n):o==="style"?r[o]={...n,...a}:o==="className"&&(r[o]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}function He(e){var o,n;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Be=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],W=Be.reduce((e,t)=>{const r=Oe(`Primitive.${t}`),o=s.forwardRef((n,a)=>{const{asChild:c,...i}=n,d=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(d,{...i,ref:a})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),J=globalThis!=null&&globalThis.document?s.useLayoutEffect:()=>{};function Ve(e,t){return s.useReducer((r,o)=>t[r][o]??r,e)}var U=e=>{const{present:t,children:r}=e,o=$e(t),n=typeof r=="function"?r({present:o.isPresent}):s.Children.only(r),a=M(o.ref,qe(n));return typeof r=="function"||o.isPresent?s.cloneElement(n,{ref:a}):null};U.displayName="Presence";function $e(e){const[t,r]=s.useState(),o=s.useRef(null),n=s.useRef(e),a=s.useRef("none"),c=e?"mounted":"unmounted",[i,d]=Ve(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const u=F(o.current);a.current=i==="mounted"?u:"none"},[i]),J(()=>{const u=o.current,h=n.current;if(h!==e){const m=a.current,b=F(u);e?d("MOUNT"):b==="none"||(u==null?void 0:u.display)==="none"?d("UNMOUNT"):d(h&&m!==b?"ANIMATION_OUT":"UNMOUNT"),n.current=e}},[e,d]),J(()=>{if(t){let u;const h=t.ownerDocument.defaultView??window,p=b=>{const j=F(o.current).includes(CSS.escape(b.animationName));if(b.target===t&&j&&(d("ANIMATION_END"),!n.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},m=b=>{b.target===t&&(a.current=F(o.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{h.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:s.useCallback(u=>{o.current=u?getComputedStyle(u):null,r(u)},[])}}function F(e){return(e==null?void 0:e.animationName)||"none"}function qe(e){var o,n;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Xe(e,t=[]){let r=[];function o(a,c){const i=s.createContext(c),d=r.length;r=[...r,c];const u=p=>{var C;const{scope:m,children:b,...v}=p,j=((C=m==null?void 0:m[e])==null?void 0:C[d])||i,x=s.useMemo(()=>v,Object.values(v));return l.jsx(j.Provider,{value:x,children:b})};u.displayName=a+"Provider";function h(p,m){var j;const b=((j=m==null?void 0:m[e])==null?void 0:j[d])||i,v=s.useContext(b);if(v)return v;if(c!==void 0)return c;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[u,h]}const n=()=>{const a=r.map(c=>s.createContext(c));return function(i){const d=(i==null?void 0:i[e])||a;return s.useMemo(()=>({[`__scope${e}`]:{...i,[e]:d}}),[i,d])}};return n.scopeName=e,[o,Ye(n,...t)]}function Ye(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const o=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(a){const c=o.reduce((i,{useScope:d,scopeName:u})=>{const p=d(a)[`__scope${u}`];return{...i,...p}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}function D(e){const t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...r)=>{var o;return(o=t.current)==null?void 0:o.call(t,...r)},[])}var Je=s.createContext(void 0);function Ze(e){const t=s.useContext(Je);return e||t||"ltr"}function Ge(e,[t,r]){return Math.min(r,Math.max(t,e))}function L(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e==null||e(n),r===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function Ke(e,t){return s.useReducer((r,o)=>t[r][o]??r,e)}var Z="ScrollArea",[fe,wt]=Xe(Z),[Qe,A]=fe(Z),he=s.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:o="hover",dir:n,scrollHideDelay:a=600,...c}=e,[i,d]=s.useState(null),[u,h]=s.useState(null),[p,m]=s.useState(null),[b,v]=s.useState(null),[j,x]=s.useState(null),[C,N]=s.useState(0),[E,R]=s.useState(0),[T,I]=s.useState(!1),[S,P]=s.useState(!1),y=M(t,g=>d(g)),f=Ze(n);return l.jsx(Qe,{scope:r,type:o,dir:f,scrollHideDelay:a,scrollArea:i,viewport:u,onViewportChange:h,content:p,onContentChange:m,scrollbarX:b,onScrollbarXChange:v,scrollbarXEnabled:T,onScrollbarXEnabledChange:I,scrollbarY:j,onScrollbarYChange:x,scrollbarYEnabled:S,onScrollbarYEnabledChange:P,onCornerWidthChange:N,onCornerHeightChange:R,children:l.jsx(W.div,{dir:f,...c,ref:y,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});he.displayName=Z;var me="ScrollAreaViewport",pe=s.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:o,nonce:n,...a}=e,c=A(me,r),i=s.useRef(null),d=M(t,i,c.onViewportChange);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),l.jsx(W.div,{"data-radix-scroll-area-viewport":"",...a,ref:d,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...e.style},children:l.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});pe.displayName=me;var _="ScrollAreaScrollbar",G=s.forwardRef((e,t)=>{const{forceMount:r,...o}=e,n=A(_,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:c}=n,i=e.orientation==="horizontal";return s.useEffect(()=>(i?a(!0):c(!0),()=>{i?a(!1):c(!1)}),[i,a,c]),n.type==="hover"?l.jsx(et,{...o,ref:t,forceMount:r}):n.type==="scroll"?l.jsx(tt,{...o,ref:t,forceMount:r}):n.type==="auto"?l.jsx(be,{...o,ref:t,forceMount:r}):n.type==="always"?l.jsx(K,{...o,ref:t}):null});G.displayName=_;var et=s.forwardRef((e,t)=>{const{forceMount:r,...o}=e,n=A(_,e.__scopeScrollArea),[a,c]=s.useState(!1);return s.useEffect(()=>{const i=n.scrollArea;let d=0;if(i){const u=()=>{window.clearTimeout(d),c(!0)},h=()=>{d=window.setTimeout(()=>c(!1),n.scrollHideDelay)};return i.addEventListener("pointerenter",u),i.addEventListener("pointerleave",h),()=>{window.clearTimeout(d),i.removeEventListener("pointerenter",u),i.removeEventListener("pointerleave",h)}}},[n.scrollArea,n.scrollHideDelay]),l.jsx(U,{present:r||a,children:l.jsx(be,{"data-state":a?"visible":"hidden",...o,ref:t})})}),tt=s.forwardRef((e,t)=>{const{forceMount:r,...o}=e,n=A(_,e.__scopeScrollArea),a=e.orientation==="horizontal",c=$(()=>d("SCROLL_END"),100),[i,d]=Ke("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return s.useEffect(()=>{if(i==="idle"){const u=window.setTimeout(()=>d("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(u)}},[i,n.scrollHideDelay,d]),s.useEffect(()=>{const u=n.viewport,h=a?"scrollLeft":"scrollTop";if(u){let p=u[h];const m=()=>{const b=u[h];p!==b&&(d("SCROLL"),c()),p=b};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[n.viewport,a,d,c]),l.jsx(U,{present:r||i!=="hidden",children:l.jsx(K,{"data-state":i==="hidden"?"hidden":"visible",...o,ref:t,onPointerEnter:L(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:L(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),be=s.forwardRef((e,t)=>{const r=A(_,e.__scopeScrollArea),{forceMount:o,...n}=e,[a,c]=s.useState(!1),i=e.orientation==="horizontal",d=$(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,h=r.viewport.offsetHeight<r.viewport.scrollHeight;c(i?u:h)}},10);return k(r.viewport,d),k(r.content,d),l.jsx(U,{present:o||a,children:l.jsx(K,{"data-state":a?"visible":"hidden",...n,ref:t})})}),K=s.forwardRef((e,t)=>{const{orientation:r="vertical",...o}=e,n=A(_,e.__scopeScrollArea),a=s.useRef(null),c=s.useRef(0),[i,d]=s.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Se(i.viewport,i.content),h={...o,sizes:i,onSizesChange:d,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:m=>c.current=m};function p(m,b){return at(m,c.current,i,b)}return r==="horizontal"?l.jsx(rt,{...h,ref:t,onThumbPositionChange:()=>{if(n.viewport&&a.current){const m=n.viewport.scrollLeft,b=ce(m,i,n.dir);a.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:m=>{n.viewport&&(n.viewport.scrollLeft=m)},onDragScroll:m=>{n.viewport&&(n.viewport.scrollLeft=p(m,n.dir))}}):r==="vertical"?l.jsx(nt,{...h,ref:t,onThumbPositionChange:()=>{if(n.viewport&&a.current){const m=n.viewport.scrollTop,b=ce(m,i);a.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:m=>{n.viewport&&(n.viewport.scrollTop=m)},onDragScroll:m=>{n.viewport&&(n.viewport.scrollTop=p(m))}}):null}),rt=s.forwardRef((e,t)=>{const{sizes:r,onSizesChange:o,...n}=e,a=A(_,e.__scopeScrollArea),[c,i]=s.useState(),d=s.useRef(null),u=M(t,d,a.onScrollbarXChange);return s.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),l.jsx(xe,{"data-orientation":"horizontal",...n,ref:u,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":V(r)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,p)=>{if(a.viewport){const m=a.viewport.scrollLeft+h.deltaX;e.onWheelScroll(m),Ce(m,p)&&h.preventDefault()}},onResize:()=>{d.current&&a.viewport&&c&&o({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:B(c.paddingLeft),paddingEnd:B(c.paddingRight)}})}})}),nt=s.forwardRef((e,t)=>{const{sizes:r,onSizesChange:o,...n}=e,a=A(_,e.__scopeScrollArea),[c,i]=s.useState(),d=s.useRef(null),u=M(t,d,a.onScrollbarYChange);return s.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),l.jsx(xe,{"data-orientation":"vertical",...n,ref:u,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":V(r)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,p)=>{if(a.viewport){const m=a.viewport.scrollTop+h.deltaY;e.onWheelScroll(m),Ce(m,p)&&h.preventDefault()}},onResize:()=>{d.current&&a.viewport&&c&&o({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:B(c.paddingTop),paddingEnd:B(c.paddingBottom)}})}})}),[ot,ge]=fe(_),xe=s.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:o,hasThumb:n,onThumbChange:a,onThumbPointerUp:c,onThumbPointerDown:i,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:h,onResize:p,...m}=e,b=A(_,r),[v,j]=s.useState(null),x=M(t,y=>j(y)),C=s.useRef(null),N=s.useRef(""),E=b.viewport,R=o.content-o.viewport,T=D(h),I=D(d),S=$(p,10);function P(y){if(C.current){const f=y.clientX-C.current.left,g=y.clientY-C.current.top;u({x:f,y:g})}}return s.useEffect(()=>{const y=f=>{const g=f.target;(v==null?void 0:v.contains(g))&&T(f,R)};return document.addEventListener("wheel",y,{passive:!1}),()=>document.removeEventListener("wheel",y,{passive:!1})},[E,v,R,T]),s.useEffect(I,[o,I]),k(v,S),k(b.content,S),l.jsx(ot,{scope:r,scrollbar:v,hasThumb:n,onThumbChange:D(a),onThumbPointerUp:D(c),onThumbPositionChange:I,onThumbPointerDown:D(i),children:l.jsx(W.div,{...m,ref:x,style:{position:"absolute",...m.style},onPointerDown:L(e.onPointerDown,y=>{y.button===0&&(y.target.setPointerCapture(y.pointerId),C.current=v.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),P(y))}),onPointerMove:L(e.onPointerMove,P),onPointerUp:L(e.onPointerUp,y=>{const f=y.target;f.hasPointerCapture(y.pointerId)&&f.releasePointerCapture(y.pointerId),document.body.style.webkitUserSelect=N.current,b.viewport&&(b.viewport.style.scrollBehavior=""),C.current=null})})})}),H="ScrollAreaThumb",we=s.forwardRef((e,t)=>{const{forceMount:r,...o}=e,n=ge(H,e.__scopeScrollArea);return l.jsx(U,{present:r||n.hasThumb,children:l.jsx(st,{ref:t,...o})})}),st=s.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:o,...n}=e,a=A(H,r),c=ge(H,r),{onThumbPositionChange:i}=c,d=M(t,p=>c.onThumbChange(p)),u=s.useRef(void 0),h=$(()=>{u.current&&(u.current(),u.current=void 0)},100);return s.useEffect(()=>{const p=a.viewport;if(p){const m=()=>{if(h(),!u.current){const b=it(p,i);u.current=b,i()}};return i(),p.addEventListener("scroll",m),()=>p.removeEventListener("scroll",m)}},[a.viewport,h,i]),l.jsx(W.div,{"data-state":c.hasThumb?"visible":"hidden",...n,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:L(e.onPointerDownCapture,p=>{const b=p.target.getBoundingClientRect(),v=p.clientX-b.left,j=p.clientY-b.top;c.onThumbPointerDown({x:v,y:j})}),onPointerUp:L(e.onPointerUp,c.onThumbPointerUp)})});we.displayName=H;var Q="ScrollAreaCorner",ve=s.forwardRef((e,t)=>{const r=A(Q,e.__scopeScrollArea),o=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&o?l.jsx(lt,{...e,ref:t}):null});ve.displayName=Q;var lt=s.forwardRef((e,t)=>{const{__scopeScrollArea:r,...o}=e,n=A(Q,r),[a,c]=s.useState(0),[i,d]=s.useState(0),u=!!(a&&i);return k(n.scrollbarX,()=>{var p;const h=((p=n.scrollbarX)==null?void 0:p.offsetHeight)||0;n.onCornerHeightChange(h),d(h)}),k(n.scrollbarY,()=>{var p;const h=((p=n.scrollbarY)==null?void 0:p.offsetWidth)||0;n.onCornerWidthChange(h),c(h)}),u?l.jsx(W.div,{...o,ref:t,style:{width:a,height:i,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function B(e){return e?parseInt(e,10):0}function Se(e,t){const r=e/t;return isNaN(r)?0:r}function V(e){const t=Se(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=(e.scrollbar.size-r)*t;return Math.max(o,18)}function at(e,t,r,o="ltr"){const n=V(r),a=n/2,c=t||a,i=n-c,d=r.scrollbar.paddingStart+c,u=r.scrollbar.size-r.scrollbar.paddingEnd-i,h=r.content-r.viewport,p=o==="ltr"?[0,h]:[h*-1,0];return ye([d,u],p)(e)}function ce(e,t,r="ltr"){const o=V(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-n,c=t.content-t.viewport,i=a-o,d=r==="ltr"?[0,c]:[c*-1,0],u=Ge(e,d);return ye([0,c],[0,i])(u)}function ye(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(r-e[0])}}function Ce(e,t){return e>0&&e<t}var it=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},o=0;return function n(){const a={left:e.scrollLeft,top:e.scrollTop},c=r.left!==a.left,i=r.top!==a.top;(c||i)&&t(),r=a,o=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(o)};function $(e,t){const r=D(e),o=s.useRef(0);return s.useEffect(()=>()=>window.clearTimeout(o.current),[]),s.useCallback(()=>{window.clearTimeout(o.current),o.current=window.setTimeout(r,t)},[r,t])}function k(e,t){const r=D(t);J(()=>{let o=0;if(e){const n=new ResizeObserver(()=>{cancelAnimationFrame(o),o=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(o),n.unobserve(e)}}},[e,r])}var Ne=he,ct=pe,dt=ve;const Pe=s.forwardRef(({className:e,children:t,...r},o)=>l.jsxs(Ne,{ref:o,className:de("relative overflow-hidden",e),...r,children:[l.jsx(ct,{className:"h-full w-full rounded-[inherit]",children:t}),l.jsx(je,{}),l.jsx(dt,{})]}));Pe.displayName=Ne.displayName;const je=s.forwardRef(({className:e,orientation:t="vertical",...r},o)=>l.jsx(G,{ref:o,orientation:t,className:de("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:l.jsx(we,{className:"relative flex-1 rounded-full bg-border"})}));je.displayName=G.displayName;const ut=()=>`chat_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,ft=e=>e.startsWith("image/")?Le:e.includes("pdf")||e.includes("document")||e.includes("text")?Ie:De,ht=e=>{if(!e)return"";const t=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,r)*100)/100+" "+t[r]},mt=async e=>{try{const r=await(await fetch(e.url)).blob(),o=window.URL.createObjectURL(r),n=document.createElement("a");n.href=o,n.download=e.name,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(o),document.body.removeChild(n)}catch(t){console.error("Download failed:",t)}},vt=()=>{const{toast:e}=Te(),[t,r]=s.useState(!1),[o,n]=s.useState(""),[a,c]=s.useState([]),[i,d]=s.useState(""),[u,h]=s.useState(!1),p=s.useRef(null),m=s.useRef(0),b=s.useRef(ut());s.useEffect(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},[a]);const v=x=>{x.preventDefault(),o==="password123"?(r(!0),c([{id:m.current++,text:"Hello! I'm your AI assistant. How can I help you today?",sender:"bot",timestamp:new Date}])):e({title:"Access Denied",description:"Incorrect password. Please try again.",variant:"destructive",duration:3e3}),n("")},j=async x=>{if(x.preventDefault(),!i.trim())return;const C={id:m.current++,text:i,sender:"user",timestamp:new Date};c(N=>[...N,C]),d(""),h(!0);try{const N="https://n8n.sunilkhatri.info/webhook/4a05c357-8d23-4869-90dd-6a7bea580582/chat",E={chatInput:i,session_id:b.current,sessionId:b.current,sessionID:b.current,memory_session_id:b.current,timestamp:new Date().toISOString(),source:"chatbot"},R=new URL(N);R.searchParams.append("session_id",b.current),R.searchParams.append("sessionId",b.current),console.log("Sending request to:",R.toString()),console.log("Request body:",E);const T=new AbortController,I=setTimeout(()=>T.abort(),5*60*1e3),S=await fetch(R.toString(),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Basic ${btoa("sunilkhatri:Utility@5432")}`,"X-Session-ID":b.current,"Session-ID":b.current},body:JSON.stringify(E),signal:T.signal});clearTimeout(I);let P="I'm sorry, I couldn't process your request at the moment.";if(console.log("Response status:",S.status),console.log("Response headers:",Object.fromEntries(S.headers.entries())),S.ok)try{const f=await S.json();console.log("Full Response data:",JSON.stringify(f,null,2)),console.log("Response data type:",typeof f),console.log("Response data keys:",Object.keys(f||{}));let g=null;typeof f=="string"&&(g=f,console.log("Found direct string response:",g));const q=["output","response","message","text","result","answer","reply","content","data","body","value","chatResponse","aiResponse","assistant_response","bot_response","llm_response"];for(const w of q)if(f&&f[w]!==void 0&&f[w]!==null){g=f[w],console.log(`Found response in field '${w}':`,g);break}if(!g&&f&&typeof f=="object"&&(Array.isArray(f)&&f.length>0&&(g=f[0],console.log("Found response in array[0]:",g)),!g&&f.data&&typeof f.data=="object")){for(const w of q)if(f.data[w]!==void 0&&f.data[w]!==null){g=f.data[w],console.log(`Found response in nested data.${w}:`,g);break}}if(!g&&f&&typeof f=="object"){const w=Object.values(f).filter(ee=>typeof ee=="string"&&ee.trim().length>0);w.length>0&&(g=w[0],console.log("Found string value in object:",g))}P=g||P,console.log("Final extracted bot response:",P);let z=[];f.files&&Array.isArray(f.files)?z=f.files.map(w=>({name:w.name||w.filename||"download",url:w.url||w.download_url||w.link,type:w.type||w.mimetype||"application/octet-stream",size:w.size||w.filesize})):f.file?z=[{name:f.file.name||f.file.filename||"download",url:f.file.url||f.file.download_url||f.file.link,type:f.file.type||f.file.mimetype||"application/octet-stream",size:f.file.size||f.file.filesize}]:(f.download_url||f.file_url)&&(z=[{name:f.filename||"download",url:f.download_url||f.file_url,type:f.filetype||"application/octet-stream",size:f.filesize}]);const Re={id:m.current++,text:P,sender:"bot",timestamp:new Date,files:z.length>0?z:void 0};c(w=>[...w,Re]);return}catch(f){console.log("JSON parsing failed, trying text response. JSON Error:",f);try{const g=await S.text();console.log("Raw text response:",g),console.log("Text response length:",g.length),g&&g.trim().length>0?(P=g.trim(),console.log("Using text response as bot response:",P)):console.log("Text response is empty or whitespace only")}catch(g){console.error("Both JSON and text parsing failed:"),console.error("JSON Error:",f),console.error("Text Error:",g)}}else{let f="";try{const g=await S.json();f=g.message||g.error||""}catch{try{f=await S.text()}catch{f=S.statusText}}console.error("Webhook response error:",{status:S.status,statusText:S.statusText,url:N,errorDetails:f}),S.status===500?P="Sorry, there's a temporary issue with the AI service. The request was received but couldn't be processed. Please try again in a moment.":S.status===401||S.status===403?P="Authentication error. Please check the webhook credentials.":P=`Error: Unable to connect to the AI service (${S.status}). ${f||"Please try again later."}`}const y={id:m.current++,text:P,sender:"bot",timestamp:new Date};c(f=>[...f,y])}catch(N){console.error("Chat error:",N);let E="Sorry, I'm having trouble connecting right now. Please check your internet connection and try again.",R="Connection Error",T="Failed to send message. Please check your connection.";N instanceof Error&&N.name==="AbortError"&&(E="The request is taking longer than expected (over 5 minutes). The AI might still be processing your request. Please try again or check back later.",R="Request Timeout",T="The request timed out after 5 minutes. Please try again.");const I={id:m.current++,text:E,sender:"bot",timestamp:new Date};c(S=>[...S,I]),e({title:R,description:T,variant:"destructive",duration:5e3})}finally{h(!1)}};return t?l.jsxs("section",{className:"section-container animate-fade-in",children:[l.jsxs("div",{className:"page-header",children:[l.jsx("h2",{className:"page-header-title",children:"AI Assistant"}),l.jsx("p",{className:"page-header-description",children:"Chat with our AI assistant for any questions or support."})]}),l.jsxs(te,{className:"max-w-4xl mx-auto",children:[l.jsxs(re,{children:[l.jsxs(ne,{className:"flex items-center gap-2",children:[l.jsx(Y,{className:"h-5 w-5"}),"AI Chat Assistant"]}),l.jsx(oe,{children:"Ask me anything and I'll do my best to help!"})]}),l.jsx(se,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx(Pe,{className:"h-96 w-full border rounded-md p-4",ref:p,children:l.jsxs("div",{className:"space-y-4",children:[a.map(x=>l.jsx("div",{className:`flex gap-3 ${x.sender==="user"?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`flex gap-2 max-w-[80%] ${x.sender==="user"?"flex-row-reverse":"flex-row"}`,children:[l.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${x.sender==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:x.sender==="user"?l.jsx(Ae,{className:"h-4 w-4"}):l.jsx(Y,{className:"h-4 w-4"})}),l.jsxs("div",{className:`rounded-lg px-3 py-2 ${x.sender==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[l.jsx("p",{className:"text-sm",children:x.text}),x.files&&x.files.length>0&&l.jsx("div",{className:"mt-2 space-y-2",children:x.files.map((C,N)=>{const E=ft(C.type);return l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-background/20 rounded border",children:[l.jsx(E,{className:"h-4 w-4"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-xs font-medium truncate",children:C.name}),C.size&&l.jsx("p",{className:"text-xs opacity-70",children:ht(C.size)})]}),l.jsx(X,{size:"sm",variant:"ghost",onClick:()=>mt(C),className:"h-6 w-6 p-0 hover:bg-background/30",children:l.jsx(_e,{className:"h-3 w-3"})})]},N)})}),l.jsx("p",{className:"text-xs opacity-70 mt-1",children:x.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},x.id)),u&&l.jsx("div",{className:"flex gap-3 justify-start",children:l.jsxs("div",{className:"flex gap-2 max-w-[80%]",children:[l.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-muted flex items-center justify-center",children:l.jsx(Y,{className:"h-4 w-4"})}),l.jsx("div",{className:"rounded-lg px-3 py-2 bg-muted",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ae,{className:"h-4 w-4 animate-spin"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm",children:"Thinking..."}),l.jsx("p",{className:"text-xs opacity-70",children:"This may take up to 5 minutes"})]})]})})]})})]})}),l.jsxs("form",{onSubmit:j,className:"flex gap-2",children:[l.jsx(le,{placeholder:"Type your message...",value:i,onChange:x=>d(x.target.value),disabled:u,className:"flex-1"}),l.jsx(X,{type:"submit",disabled:u||!i.trim(),children:u?l.jsx(ae,{className:"h-4 w-4 animate-spin"}):l.jsx(ke,{className:"h-4 w-4"})})]})]})})]})]}):l.jsxs("section",{className:"section-container animate-fade-in",children:[l.jsxs("div",{className:"page-header",children:[l.jsx("h2",{className:"page-header-title",children:"AI Assistant"}),l.jsx("p",{className:"page-header-description",children:"Please enter the password to access the AI assistant."})]}),l.jsx("div",{className:"flex justify-center",children:l.jsxs(te,{className:"w-full max-w-md",children:[l.jsxs(re,{className:"text-center",children:[l.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-muted",children:l.jsx(Me,{className:"h-8 w-8 text-muted-foreground"})}),l.jsx(ne,{children:"Password Required"}),l.jsx(oe,{children:"Enter the password to access the chatbot"})]}),l.jsx(se,{children:l.jsxs("form",{onSubmit:v,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ee,{htmlFor:"password",children:"Password"}),l.jsx(le,{id:"password",type:"password",placeholder:"Enter password",value:o,onChange:x=>n(x.target.value),required:!0})]}),l.jsx(X,{type:"submit",className:"w-full",children:"Access Chatbot"})]})})]})})]})};export{vt as default};
